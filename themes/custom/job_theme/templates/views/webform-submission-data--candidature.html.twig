{#
/**
 * @file
 * Default theme implementation for webform submission data.
 *
 * Available variables:
 * - webform_submission: The webform submission.
 * - webform: The webform.
 *
 * @see template_preprocess_webform_submission_data()
 *
 * @ingroup themeable
 */
#}
{% set classes = [
  'webform-submission-data',
  'webform-submission-data--webform-' ~ webform.id()|clean_class,
  view_mode ? 'webform-submission-data--view-mode-' ~ view_mode|clean_class,
] %}
{% if user_role == 'recruteur' %}
  <div class="card">
    <div class="card-header text-white border-0">
      <h2>{{ sub_user }}</h2>
      <p class="mb-0">{{ 'Offre'|t }} : {{ sub_node_title }}</p>
      <p class="mb-0">{{ 'A postulé le'|t }} : {{ sub_date }}</p>
      <button type="button"
              class="btn btn-white"
              data-toggle="modal" data-target="#submissionModal">
        {{ 'Voir'|t }}
      </button>
    </div>
  </div>

  <div class="modal fade" id="submissionModal" tabindex="-1" role="dialog" aria-labelledby="submissionModalLabel">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header text-center bg-c-dark-blue">
          <h4 class="w-100 font-weight-light white-text">{{ sub_node_title }}</h4>
        </div>
        <div class="modal-body px-3 d-flex flex-column justify-content-center align-items-center">
          <p>{{ sub_msg }}</p>
          {% if sub_cv %}
            <a class="showCv btn-lg" target="_blank" href="{{ sub_cv }}">{{ 'Afficher le CV'|t }}</a>
          {% else %}
            <button class="btn btn-dark btn-lg">{{ 'Le candidat a supprimé son CV'|t }}</button>
          {% endif %}
        </div>
        <div class="modal-footer d-flex flex-column justify-content-center align-items-center">
          <p class="mb-0">{{ 'Répondre par email à'|t }} : <a href="mailto:{{ sub_mail }}">{{ sub_mail }}</a></p>
          <button type="button" class="btn bg-c-dark-blue my-3" data-dismiss="modal"
                  aria-label="Close">
            {{ 'Retour'|t }}
          </button>
        </div>
      </div>
    </div>
  </div>

{% else %}

  <div class="card">
    <div class="card-header text-white border-0">
      <p class="mb-0">{{ 'Date'|t }} : {{ sub_date }} - {{ sub_node_owner }}</p>
      {% if sub_node_title != '' %}
        <h2 class="h4">{{ 'Offre'|t }} : {{ sub_node_title }}</h2>
      {% else %}
        <h2 class="h4">{{ 'Offre supprimée'|t }}</h2>
      {% endif %}
      <button type="button"
              class="btn btn-white"
              data-toggle="modal" data-target="#submissionModal">
        {{ 'Voir'|t }}
      </button>
    </div>
  </div>

  <div class="modal fade" id="submissionModal" tabindex="-1" role="dialog" aria-labelledby="submissionModalLabel">
    <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
      <div class="modal-content">
        <div class="modal-header text-center bg-c-dark-blue">
          <h4 class="w-100 font-weight-light white-text">{{ sub_node_title }}</h4>
        </div>
        <div class="modal-body px-3 d-flex flex-column justify-content-center align-items-center">
          <p>{{ sub_msg }}</p>
          {% if sub_cv %}
            <a class="showCv btn-lg" target="_blank" href="{{ sub_cv }}">{{ 'Afficher le CV'|t }}</a>
          {% else %}
            <button class="btn btn-dark btn-lg">{{ 'CV supprimé'|t }}</button>
          {% endif %}
        </div>
        <div class="modal-footer d-flex justify-content-center">
          <button type="button" class="btn bg-c-dark-blue my-3" data-dismiss="modal"
                  aria-label="Close">
            {{ 'Retour'|t }}
          </button>
        </div>
      </div>
    </div>
  </div>

{% endif %}
